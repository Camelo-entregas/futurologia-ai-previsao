
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Futurologia AI - Times e Competições</title>
</head>
<body>
  <h1>⚽ Futurologia AI - Selecione Campeonato e Times</h1>

  <label for="league-select">Campeonato:</label>
  <select id="league-select">
    <option value="">Carregando campeonatos...</option>
  </select>

  <br/><br/>

  <label for="home-team">Time Mandante:</label>
  <select id="home-team" disabled>
    <option value="">Selecione um campeonato primeiro</option>
  </select>

  <label for="away-team">Time Visitante:</label>
  <select id="away-team" disabled>
    <option value="">Selecione um campeonato primeiro</option>
  </select>

  <script>
    async function fetchAllLeaguesAndTeams() {
      const leagueSelect = document.getElementById('league-select');
      const homeTeamSelect = document.getElementById('home-team');
      const awayTeamSelect = document.getElementById('away-team');

      try {
        const response = await fetch("https://v3.football.api-sports.io/leagues?current=true", {
          method: "GET",
          headers: {
            "x-apisports-key": "62271872bf054aeb61b121932c95d3ee"
          }
        });

        const data = await response.json();
        const leagues = data.response;

        leagueSelect.innerHTML = '<option value="">Selecione um campeonato</option>';

        leagues.forEach(leagueObj => {
          const league = leagueObj.league;
          const option = document.createElement("option");
          option.value = league.id;
          option.text = league.name + " - " + league.country.name;
          leagueSelect.appendChild(option);
        });

        leagueSelect.addEventListener('change', async function () {
          const leagueId = this.value;
          if (!leagueId) return;

          homeTeamSelect.disabled = true;
          awayTeamSelect.disabled = true;

          const teamsResponse = await fetch(`https://v3.football.api-sports.io/teams?league=${leagueId}&season=2024`, {
            method: "GET",
            headers: {
              "x-apisports-key": "62271872bf054aeb61b121932c95d3ee"
            }
          });

          const teamsData = await teamsResponse.json();
          const teams = teamsData.response;

          homeTeamSelect.innerHTML = '<option value="">Selecione o mandante</option>';
          awayTeamSelect.innerHTML = '<option value="">Selecione o visitante</option>';

          teams.forEach(teamObj => {
            const team = teamObj.team;
            const optionHome = document.createElement("option");
            const optionAway = document.createElement("option");

            optionHome.value = team.id;
            optionHome.text = team.name;

            optionAway.value = team.id;
            optionAway.text = team.name;

            homeTeamSelect.appendChild(optionHome);
            awayTeamSelect.appendChild(optionAway);
          });

          homeTeamSelect.disabled = false;
          awayTeamSelect.disabled = false;
        });
      } catch (err) {
        console.error("Erro ao buscar ligas ou times:", err);
      }
    }

    document.addEventListener("DOMContentLoaded", fetchAllLeaguesAndTeams);
  </script>
</body>
</html>
